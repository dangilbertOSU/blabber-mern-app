(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(39)},33:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),s=a(8),l=a(17),u=a(5),i=a(15),m=a.n(i),d=a(24),f=a(9),p=a(10),b=a(12),h=a(11),E=a(13),g=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).submitEntry=function(e){e.preventDefault();var t=new Date,n=t.getDate(),r=t.getMonth()+1,c=t.getFullYear();n<10&&(n="0"+n),r<10&&(r="0"+r),t=r+"/"+n+"/"+c;var o=a.refs.NewPost.value;if(""!==o){var s={message:o,date:t};fetch("/api/add",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(s)}).then(function(e){return console.log(e)}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)});var l=o;return a.props.updateEntries(l),a.refs.NewPost.value="",l}},a.cancelEntry=function(){a.refs.NewPost.value=""},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"create-entry"},r.a.createElement("textarea",{ref:"NewPost",placeholder:"Feel free to blabber here..."}),r.a.createElement("div",{className:"create-entry-buttons"},r.a.createElement("button",{className:"PrimaryButton",onClick:this.submitEntry},"Submit"),r.a.createElement("button",{className:"SecondaryButton",onClick:this.cancelEntry},"Cancel")))}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(h.a)(t).call(this,e))).updateEntries=function(e){var t=new Date,n=t.getDate(),r=t.getMonth()+1,c=t.getFullYear();n<10&&(n="0"+n),r<10&&(r="0"+r),t=r+"/"+n+"/"+c;var o=a.state.posts.slice();o.push({message:e,date:t}),a.setState({posts:o})},a.callBackendAPI=Object(d.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/posts");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)})),a.deleteLastEntry=function(){window.confirm("Press OK to confirm.")&&console.log("Post not removed because I don't know how")},a.state={posts:[],loaded:!1},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.callBackendAPI().then(function(t){return e.setState({posts:t})}).catch(function(e){return console.log(e)}),this.setState({loaded:!0})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g,{updateEntries:this.updateEntries}),r.a.createElement("div",{className:"submissions"},this.state.loaded?this.state.posts.map(function(e,t){return e.message&&e.date?r.a.createElement("div",{className:"submissions_post"},r.a.createElement("p",null,e.message),r.a.createElement("p",{className:"submissions_post_date"},e.date)):null}):r.a.createElement("p",null,"loading...")))}}]),t}(n.Component),w=(a(33),function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),u=Object(s.a)(l,2),i=u[0],m=u[1],d=function(e){"username"===e.target.name?o(e.target.value):"password"===e.target.name&&m(e.target.value)};return r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),""!==c&&i.length>3){var a={username:c,password:i};fetch("/api/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(a)}).then(function(t){200===t.status&&e.setLogin(!0)}).then(function(e){return e}).catch(function(e){return e})}}},r.a.createElement("section",null,r.a.createElement("input",{type:"text",name:"username",value:c,onChange:d,placeholder:"username"}),r.a.createElement("input",{type:"password",name:"password",value:i,onChange:d,placeholder:"password"})),r.a.createElement("br",null),r.a.createElement("section",null,r.a.createElement("button",{type:"submit",className:"PrimaryButton"},"Login")))}),y=a(16);var N=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(l.a,null,r.a.createElement(y.a,null,r.a.createElement(y.b,{classToggle:"Header_Animation",triggerElement:"#dummy",offset:50},r.a.createElement("div",{className:"GlobalHeader"},r.a.createElement("div",{className:"GlobalHeader_Left GlobalHeader_List"},r.a.createElement("ul",{className:"GlobalHeader_Titles"},r.a.createElement("li",null,r.a.createElement(l.b,{to:"/",className:"GlobalHeader_Logo"},"blabber.")))),r.a.createElement("div",{className:"GlobalHeader_Right GlobalHeader_List"},r.a.createElement("ul",{className:"GlobalHeader_Titles"},a?r.a.createElement("li",null,r.a.createElement("button",{className:"SecondaryButton",onClick:function(){return c(!1)}},"logout")):null))))),r.a.createElement("div",{className:"main_container"},a?r.a.createElement(u.a,{path:"/",exact:!0,component:v}):r.a.createElement(u.a,{path:"/",render:function(e){return r.a.createElement(w,{setLogin:c})}})))};a(38);var O=function(){return r.a.createElement(N,null)};o.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.9e4daeb0.chunk.js.map