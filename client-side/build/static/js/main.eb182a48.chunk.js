(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){},29:function(e,t,a){e.exports=a(52)},34:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),s=a.n(c),l=a(1),o=(a(34),a(3)),i=(a(35),function(e){var t=e.className,a=e.children,n=Object(o.a)(e,["className","children"]);return r.a.createElement("div",Object.assign({className:t},n),a)});i.defaultProps={className:"main_container"};var u=i,m=a(2),p=a.n(m),f=a(4),d=(a(37),function(e){var t=e.className,a=e.children,n=e.href,c=e.onClick,s=e.variant,l=Object(o.a)(e,["className","children","href","onClick","variant"]),i=t+" "+s,u=n?"a":"button";return r.a.createElement(u,Object.assign({className:i,href:n,onClick:c,variant:s},l),a)});d.defaultProps={className:"button",variant:"secondary"};var h=d,b=(a(38),function(){var e=Object(f.a)(p.a.mark(function e(t,a){var n,r,c,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.textValue,c=t.pageId,s={username:n,pageId:c,component:{text:{value:r},position:{x:0,y:0},size:{width:200,height:200}}},e.next=4,fetch("/api/addText",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(function(e){return window.location.reload()}).catch(function(e){return console.log(e)});case 4:a();case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()),g=function(e){var t=e.className,a=(e.children,e.setVisible),c=(e.user,e.visible),s=Object(o.a)(e,["className","children","setVisible","user","visible"]),i=Object(n.useState)(""),u=Object(l.a)(i,2),m=u[0],d=u[1],g=function(){var t=Object(f.a)(p.a.mark(function t(n){var r,s;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r=e.user,s=window.location.pathname.replace("/users/".concat(r,"/editpage/"),""),b({user:r,textValue:m,pageId:s},window.location.reload()),d(""),a(!c);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",Object.assign({className:t},s),r.a.createElement("form",{onSubmit:g},r.a.createElement("section",null,r.a.createElement("textarea",{ref:function(e){return e&&e.focus()},type:"text",name:"textValue",value:m,onChange:function(e){"textValue"===e.target.name&&d(e.target.value)},placeholder:"add text here..."})),r.a.createElement("br",null),r.a.createElement("section",{className:"create-page-buttons"},r.a.createElement(h,{type:"submit",variant:"primary"},"Submit"),r.a.createElement("br",null),r.a.createElement(h,{variant:"secondary",onClick:function(e){return function(e){e.preventDefault(),d(""),a(!c)}(e)}},"Cancel"))))};g.defaultProps={className:"create-page-form"};var v=g,E=(a(39),function(e){e.className;var t=e.children,a=e.setVisible,n=e.visible,c=Object(o.a)(e,["className","children","setVisible","visible"]);return n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",Object.assign({className:"modal"},c,{onClick:a?function(){a(),console.log("clicked")}:null})),r.a.createElement("div",{className:"modal_content"},t)):null}),O=a(14),j=a(15),y=a(17),w=a(16),N=a(18),x=a(13),S=a.n(x),k=function(e){var t=e.indexOf("translate(")+10,a=e.indexOf(");"),n=e.substring(t,a),r=(n=n.split("px").join("")).split(", ");return r[0]=Number(r[0]),r[1]?r[1]=Number(r[1]):r[1]=0,r},C=function(e){return Number(e.replace("px",""))},P=function(e){return Number(e.replace("px",""))},_=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(y.a)(this,Object(w.a)(t).call(this,e))).deleteEntry=function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("Press OK to confirm.")&&console.log("deleted");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault()},a.handleStart=function(e,t){var n=e.target.offsetParent.attributes.style.value,r=e.target.offsetParent.attributes.style.ownerElement.style,c=r.height,s=r.width,l=k(n);s=P(s),c=C(c);var o={_id:t._id,changes:{position:{x:l[0],y:l[1]},size:{width:s,height:c}}},i=a.props.changes;i.push(o),a.props.setChanges(i)},a.handleStop=function(e,t){e.preventDefault();var n=e.target.offsetParent.attributes.style.value,r=e.target.offsetParent.attributes.style.ownerElement.style,c=r.height,s=r.width,l=k(n);s=P(s),c=C(c);var o={_id:t._id,changes:{position:{x:l[0],y:l[1]},size:{width:s,height:c}}},i=a.props.changes;i.push(o),a.props.setChanges(i)},a.enterEditMode=function(){a.setState({editMode:!a.state.editMode})},a.createDraggable=function(e,t){var n=e.text,c=e.position,s=e.size;return a.props.editMode?r.a.createElement(S.a,{handle:".edit-move-handle",onStart:function(t){return a.handleStart(t,e)},onStop:function(t){return a.handleStop(t,e)},key:t},r.a.createElement("div",{className:"submissions_post_edit_mode",style:{width:s.width,height:s.height}},r.a.createElement("span",{className:"edit-move-handle"}),r.a.createElement("p",null,n.value))):r.a.createElement(S.a,{defaultPosition:{x:c.x,y:c.y},disabled:!0,key:t},r.a.createElement("div",{className:"submissions_post",style:{width:s.width,height:s.height}},r.a.createElement("p",null,n.value)))},a.getFormat=function(e){return e.url?r.a.createElement("img",{src:"/uploads/"+e.url,alt:"picture"+e.url}):e.heading?r.a.createElement("h1",null,e.heading.message):e.paragraph?r.a.createElement("p",null,e.paragraph.message):void 0},a.state={isHovered:!1,trashVisible:!1,components:{}},a}return Object(N.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.components.map(function(t,a){return e.createDraggable(t,a)}))}}]),t}(n.Component);a(40);function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var T=r.a.createElement("defs",null,r.a.createElement("path",{d:"M13.8076172,18.28125 L31.1923828,18.28125 C32.1328125,18.28125 32.6074219,19.4238281 31.9394532,20.0830078 L23.2470703,28.7226563 C22.8339844,29.1357422 22.1748047,29.1357422 21.7617187,28.7226563 L13.0693359,20.0830078 C12.3925781,19.4238281 12.8671875,18.28125 13.8076172,18.28125 Z M42.1875001,7.03124994 L42.1875001,37.9687501 C42.1875001,40.2978516 40.2978516,42.1875001 37.9687501,42.1875001 L7.03124994,42.1875001 C4.70214836,42.1875001 2.81249992,40.2978516 2.81249992,37.9687501 L2.81249992,7.03124994 C2.81249992,4.70214836 4.70214836,2.81249992 7.03124994,2.81249992 L37.9687501,2.81249992 C40.2978516,2.81249992 42.1875001,4.70214836 42.1875001,7.03124994 Z M37.9687501,37.4414063 L37.9687501,7.55859369 C37.9687501,7.26855462 37.7314454,7.03124994 37.4414063,7.03124994 L7.55859369,7.03124994 C7.26855462,7.03124994 7.03124994,7.26855462 7.03124994,7.55859369 L7.03124994,37.4414063 C7.03124994,37.7314454 7.26855462,37.9687501 7.55859369,37.9687501 L37.4414063,37.9687501 C37.7314454,37.9687501 37.9687501,37.7314454 37.9687501,37.4414063 Z",id:"path-1"})),F=r.a.createElement("g",{id:"Home-Copy",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",opacity:.194359189},r.a.createElement("g",{id:"Page",transform:"translate(-145.000000, -563.000000)"},r.a.createElement("g",{id:"caret-square-down",transform:"translate(129.000000, 556.000000)"},r.a.createElement("g",{transform:"translate(22.500000, 22.500000) rotate(90.000000) translate(-22.500000, -22.500000) "},r.a.createElement("mask",{id:"mask-2",fill:"white"},r.a.createElement("use",{xlinkHref:"#path-1"})),r.a.createElement("g",{fillRule:"nonzero"}),r.a.createElement("path",{d:"M12.1030233,11.4755782 C15.9232669,7.65533461 19.5889958,10.8682036 23.458283,10.8277002 C25.9429472,10.8016909 29.7523737,10.8016909 34.8865624,10.8277002 L30.0428043,34.2470623 L18.9007485,34.2470623 C6.86893168,26.5660729 4.60302326,18.9755782 12.1030233,11.4755782 Z",id:"\\uD83C\\uDFA8-color",fill:"#000000",fillRule:"evenodd",mask:"url(#mask-2)"}))))),L=function(e){var t=e.svgRef,a=D(e,["svgRef"]);return r.a.createElement("svg",V({className:"arrow",width:"11px",height:"26px",viewBox:"0 0 11 26",ref:t},a),T,F)},R=r.a.forwardRef(function(e,t){return r.a.createElement(L,V({svgRef:t},e))}),M=(a.p,a(41),function(e){var t=e.className,a=e.onClick,n=e.type,c=Object(o.a)(e,["className","onClick","type"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,Object.assign({className:t,onClick:a,type:n},c)))});M.defaultProps={className:"arrow"};var H=M,I=function(e){e.className;var t=e.children,a=Object(o.a)(e,["className","children"]),c=Object(n.useState)(!1),s=Object(l.a)(c,2),i=s[0],u=s[1];return r.a.createElement("div",Object.assign({className:i?"sidebar expanded":"sidebar"},a),r.a.createElement("div",{className:i?"content dissolve":"content"},t),r.a.createElement(H,{className:i?"arrow rotated":"arrow",onClick:function(){return u(!i)}}))};function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var A=r.a.createElement("circle",{className:"path",fill:"transparent",strokeWidth:2,cx:33,cy:33,r:30,stroke:"url(#gradient)"}),U=r.a.createElement("linearGradient",{id:"gradient"},r.a.createElement("stop",{offset:"50%",stopColor:"#77338A",stopOpacity:1}),r.a.createElement("stop",{offset:"65%",stopColor:"#77338A",stopOpacity:.5}),r.a.createElement("stop",{offset:"100%",stopColor:"#77338A",stopOpacity:0})),Z=function(e){var t=e.svgRef,a=z(e,["svgRef"]);return r.a.createElement("svg",J({className:"spinner",width:"174px",height:"174px",viewBox:"0 0 66 66",ref:t},a),A,U)},B=r.a.forwardRef(function(e,t){return r.a.createElement(Z,J({svgRef:t},e))}),W=(a.p,a(42),function(e){var t=e.className,a=Object(o.a)(e,["className"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,Object.assign({className:t},a)))});W.defaultProps={className:"spinner"};var Y=W,q=function(e){var t=e.className,a=e.user,c=Object(n.useState)(),s=Object(l.a)(c,2),o=s[0],i=s[1],u=Object(n.useState)([]),m=Object(l.a)(u,2),d=m[0],b=m[1],g=Object(n.useState)({}),O=Object(l.a)(g,2),j=O[0],y=O[1],w=Object(n.useState)(),N=Object(l.a)(w,2),x=N[0],S=N[1],k=Object(n.useState)(!1),C=Object(l.a)(k,2),P=C[0],V=C[1],D=Object(n.useState)(!1),T=Object(l.a)(D,2),F=T[0],L=T[1],R=Object(n.useState)(!1),M=Object(l.a)(R,2),H=M[0],J=M[1],z=Object(n.useState)(e.user),A=Object(l.a)(z,2),U=A[0],Z=A[1],B=function(){var e=Object(f.a)(p.a.mark(function e(){var t,a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.pathname.replace("users","api").replace("/editpage","/pages").toString(),e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,200!==a.status&&i(n.message),e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){B().then(function(e){var t=e.username,a=e.page,n=a.title,r=a.contents,c=a._id;Z(t),document.title="".concat(n," | blabber."),r?y(r):i("No Data"),S(c),V(!0)}).catch(function(e){console.log(e)})},[e.user]);var W=function(){var e=Object(f.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={pageChanges:d,pageId:x},e.next=4,fetch("/api/update",{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(a)}).then(function(e){return null}).then(function(e){return null}).catch(function(e){return console.log(e)});case 4:window.location.reload();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return e.user!==U?r.a.createElement("p",null," This is not your page to edit "):r.a.createElement("div",{className:t},r.a.createElement(I,null,r.a.createElement(h,{variant:"transparent",onClick:function(){return J(!0)}},"Add Text"),r.a.createElement(h,{variant:"transparent"},"Upload Photo"),r.a.createElement(h,{variant:F?"secondary":"transparent",onClick:function(){return L(!F)}},"Edit Mode"),F?r.a.createElement(h,{variant:"transparent",onClick:function(e){return W(e)}},"Save Changes"):null,r.a.createElement(h,{href:"/users/".concat(a,"/pages/").concat(x),variant:"transparent"},"Live Page")),r.a.createElement(E,{visible:H,setVisible:J},r.a.createElement(v,{visible:H,setVisible:J,user:a})),o?r.a.createElement("p",null,o):P?r.a.createElement(_,{components:j,editMode:F,changes:d,setChanges:b}):r.a.createElement(Y,null))};q.defaultProps={className:"page"};var G=q,K=function(e){var t=e.className,a=(e.children,Object(o.a)(e,["className","children"]));return r.a.createElement("div",Object.assign({className:t},a),r.a.createElement("p",null,"404 error not found."))};K.defaultProps={className:"FourOhFour"};var Q=K,X=(a(43),function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0],s=a[1];Object(n.useEffect)(function(){s(e.user)},[e.user]);var o=r.a.createElement(h,{variant:"secondary",href:"/logout"},"log out"),i=r.a.createElement(h,{variant:"secondary",href:"/login"},"log in");return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header_left header_list"},r.a.createElement("ul",{className:"header_titles"},r.a.createElement("li",null,r.a.createElement(h,{className:"header_logo",variant:"plain",href:"/"},"blabber.")))),r.a.createElement("div",{className:"header_right header_list"},r.a.createElement("ul",null,r.a.createElement("li",null,c?o:i))))}),$=function(e){return function(t){var a=Object(n.useState)("default"),c=Object(l.a)(a,2),s=c[0],o=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(e,Object.assign({user:s,setUser:o},t)))}},ee=(a(25),$(function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(""),i=Object(l.a)(o,2),u=i[0],m=i[1],d=function(e){"username"===e.target.name?s(e.target.value):"password"===e.target.name&&m(e.target.value)},b=function(t){e.setUser(t)},g=function(){var t=Object(f.a)(p.a.mark(function t(a){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(""!==c&&u.length>3)){t.next=5;break}return n={username:c,password:u},t.next=5,fetch("/api/authenticate",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(t){if(200!==t.status)throw new Error(t.error);b(c),window.location.href="/",e.history.push("/")}).catch(function(e){console.log(e),alert("Error logging in please try again")});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("form",{class:"form",onSubmit:g},r.a.createElement("section",null,r.a.createElement("input",{type:"text",name:"username",value:c,onChange:d,placeholder:"username"}),r.a.createElement("input",{type:"password",name:"password",value:u,onChange:d,placeholder:"password"})),r.a.createElement("br",null),r.a.createElement("section",null,r.a.createElement(h,{type:"submit",variant:"primary"},"login"),r.a.createElement("p",null,"Don't have an account? ",r.a.createElement("a",{href:"/register"},"click here to register"))))})),te=function(e){var t=e.className,a=(e.children,Object(o.a)(e,["className","children"])),c=function(){var e=Object(f.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/logout");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){c().then(function(e){console.log(e)}).catch(function(e){return console.log(e)})},[]),r.a.createElement("div",Object.assign({className:t},a),r.a.createElement("p",null,"You've been logged out"),r.a.createElement("a",{href:"/login"},"Click here to log back in."))};te.defaultProps={className:"logout"};var ae=te,ne=function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(),i=Object(l.a)(o,2),u=i[0],m=i[1],p=function(e){"username"===e.target.name?s(e.target.value):"password"===e.target.name&&m(e.target.value)};return r.a.createElement("form",{class:"form",onSubmit:function(t){if(t.preventDefault(),""!==c&&u.length>3){var a={username:c,password:u};fetch("/api/register",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(a)}).then(function(t){if(200!==t.status)throw new Error(t.error);e.history.push("/login")}).catch(function(e){console.log(e),alert("Error registering, please try again")})}}},r.a.createElement("section",null,r.a.createElement("input",{type:"text",name:"username",value:c,onChange:p,placeholder:"username"}),r.a.createElement("input",{type:"password",name:"password",value:u,onChange:p,placeholder:"password"})),r.a.createElement("br",null),r.a.createElement("section",null,r.a.createElement(h,{type:"submit",variant:"primary"},"Register"),r.a.createElement("p",null,"Already have an account? ",r.a.createElement("a",{href:"/login"},"click here to login."))))},re=(a(44),function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return e=a+"/"+t+"/"+n}),ce=function(){var e=Object(f.a)(p.a.mark(function e(t,a){var n,r,c,s,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=re(),r=t.user,c=t.title,s=t.description,l={username:r,page:{title:c,description:s,date_created:n}},e.next=5,fetch("/api/addPage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(function(e){return null}).catch(function(e){return console.log(e)});case 5:a();case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),se=function(e){var t=e.className,a=(e.children,e.setVisible),c=(e.user,e.visible),s=Object(o.a)(e,["className","children","setVisible","user","visible"]),i=Object(n.useState)(""),u=Object(l.a)(i,2),m=u[0],d=u[1],b=Object(n.useState)(""),g=Object(l.a)(b,2),v=g[0],E=g[1],O=function(){var t=Object(f.a)(p.a.mark(function t(a){var n,r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.user,r={user:n,title:m,description:v},t.next=5,ce(r,window.location.reload());case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),j=function(e){"title"===e.target.name&&d(e.target.value),"description"===e.target.name&&E(e.target.value)};return r.a.createElement("div",Object.assign({className:t},s),r.a.createElement("form",{onSubmit:O},r.a.createElement("section",null,r.a.createElement("input",{type:"text",name:"title",value:m,onChange:j,placeholder:"title..."}),r.a.createElement("input",{type:"text",name:"description",value:v,onChange:j,placeholder:"description..."})),r.a.createElement("br",null),r.a.createElement("section",{className:"create-page-buttons"},r.a.createElement(h,{type:"submit",variant:"primary"},"Create Page"),r.a.createElement("br",null),r.a.createElement(h,{variant:"secondary",onClick:function(e){return function(e){e.preventDefault(),d(""),E(""),a(!c)}(e)}},"Cancel"))))};se.defaultProps={className:"create-page-form"};var le=se,oe=a(11),ie=(a(45),function(e){var t=e.pages;return r.a.createElement("div",{className:"list_pages"},t.length>0?t.map(function(t,a){var n=t.title,c=t.description,s=t._id,l=e.user;return r.a.createElement(oe.b,{to:"/users/".concat(l,"/editpage/").concat(s),key:a},r.a.createElement("div",{className:"page_item"},r.a.createElement("p",{className:"page_item_title"},n),r.a.createElement("p",null,c)))}):null)}),ue=function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/".concat(t,"/pages"));case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),me=(a(50),function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(l.a)(o,2),u=i[0],m=i[1],p=Object(n.useState)(!1),f=Object(l.a)(p,2),d=f[0],b=f[1],g=e.user;Object(n.useEffect)(function(){null!==e.user&&(ue(e.user).then(function(e){s(e),m(!0)}).catch(function(e){return console.log(e)}),document.title="".concat(e.user," | blabber."))},[e.user]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(I,null,r.a.createElement(h,{variant:"transparent",onClick:function(){return b(!d)}},"add page")),r.a.createElement("div",{className:"pages_container",style:u?null:{textAlign:"center"}},u?r.a.createElement(ie,{user:g,pages:c}):r.a.createElement(Y,null))),r.a.createElement(E,{visible:d,setVisible:b},r.a.createElement(le,{visible:d,setVisible:b,user:g})))}),pe=(a(51),function(e){var t=e.className,a=(e.children,e.disabled),c=e.firstValue,s=e.secondValue,i=e.setFirstValue,u=e.setSecondValue,m=e.firstPlaceHolder,p=e.secondPlaceHolder,f=e.handleSubmit,d=e.ref,b=Object(o.a)(e,["className","children","disabled","firstValue","secondValue","setFirstValue","setSecondValue","firstPlaceHolder","secondPlaceHolder","handleSubmit","ref"]),g=Object(n.useState)(!1),v=Object(l.a)(g,2),E=v[0],O=v[1];return r.a.createElement("div",Object.assign({className:t},b),r.a.createElement("form",{onSubmit:f},r.a.createElement("section",{className:"comment-section-textarea"},r.a.createElement("input",{disabled:a,type:"text",name:"name",onChange:function(e){return i(e.target.value)},value:c,placeholder:m}),r.a.createElement("textarea",{type:"text",name:"comment",value:s,onChange:function(e){return u(e.target.value)},onFocus:function(){O(!0)},placeholder:p,ref:d})),r.a.createElement("br",null),r.a.createElement("section",{className:E?"comment-section-buttons":"comment-section-buttons invisible"},r.a.createElement(h,{type:"submit",variant:"primary"},"submit"),r.a.createElement("br",null),r.a.createElement(h,{variant:"secondary",onClick:function(e){return function(e){e.preventDefault(),i(""),u("")}(e)}},"cancel"))))});pe.defaultProps={className:"comment-section-form"};var fe=pe,de=function(){var e=Object(f.a)(p.a.mark(function e(t,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/addComment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return a()}).catch(function(e){return console.log(e)});case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),he=function(e){var t=e.className,a=(e.children,e.id,e.page),c=e.user,s=Object(o.a)(e,["className","children","id","page","user"]),i=Object(n.useState)(),u=Object(l.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)(),d=Object(l.a)(f,2),h=d[0],b=d[1],g=Object(n.useRef)();Object(n.useEffect)(function(){g.current.scrollIntoView({behavior:"smooth",block:"center"}),c&&b(c)},[c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",Object.assign({className:t},s),r.a.createElement(fe,{firstValue:c||h,disabled:!!c,secondValue:m,setFirstValue:b,setSecondValue:p,firstPlaceHolder:c||"place name here...",secondPlaceHolder:"add comment here...",handleSubmit:function(t){return function(t){t.preventDefault();var a={id:e.id,commentObj:{comment:m,name:h}};de(a,window.location.reload()),p(""),b("")}(t)}}),r.a.createElement("div",{className:"comment-section-comments",ref:g},r.a.createElement("p",null,"Comments: ",a.comments.length),a.comments.map(function(e,t){return function(e,t){return r.a.createElement("div",{className:"comment-content",key:t},r.a.createElement("p",{className:"comment-content-name"},e.name),r.a.createElement("p",{className:"comment-content-comment"},e.comment),r.a.createElement("p",{className:"comment-content-date"},e.date.substring(0,10)))}(e,t)}))))};he.defaultProps={className:"comment-section"};var be=he,ge=function(e){var t=e.className,a=e.user,c=Object(o.a)(e,["className","user"]),s=Object(n.useState)(),i=Object(l.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(),h=Object(l.a)(d,2),b=h[0],g=h[1],v=Object(n.useState)({}),E=Object(l.a)(v,2),O=E[0],j=E[1],y=Object(n.useState)(!1),w=Object(l.a)(y,2),N=w[0],x=w[1],k=function(){var e=Object(f.a)(p.a.mark(function e(){var t,a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.pathname.replace("users","api").toString(),e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:if(n=e.sent,200===a.status){e.next=9;break}throw Error(n.message);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){k().then(function(e){var t=e.page,a=t.title,n=t.contents,r=t._id;document.title="".concat(a," | blabber."),n?j(e.page):m("No Data"),g(r),x(!0)}).catch(function(e){return console.log(e)})},[]),u?r.a.createElement("p",null,u):N?r.a.createElement("div",Object.assign({className:t},c),O.contents.map(function(e,t){return r.a.createElement(S.a,{defaultPosition:{x:e.position.x,y:e.position.y},disabled:!0,key:t},r.a.createElement("div",{className:"submissions_post",style:{width:e.size.width,height:e.size.height}},r.a.createElement("p",null,e.text.value)))}),r.a.createElement(be,{id:b,page:O,user:a})):r.a.createElement(Y,null)};ge.defaultProps={className:"page"};var ve=ge,Ee=function(e){var t=Object(n.useState)({}),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(l.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(),h=Object(l.a)(d,2),b=h[0],g=h[1],v=Object(n.useState)(),E=Object(l.a)(v,2),O=E[0],j=E[1],y=function(){var e=Object(f.a)(p.a.mark(function e(){var t,a,n,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.pathname.replace("users","api").toString(),a=t.replace("/api/","").replace("/",""),document.title="".concat(a," | blabber."),g(a),e.next=6,fetch(t+"/pages");case 6:return n=e.sent,e.next=9,n.json();case 9:if(r=e.sent,200===n.status){e.next=15;break}j(r.message),m(!0),e.next=16;break;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){y().then(function(e){s(e),m(!0)}).catch(function(e){return console.log(e)})},[]),u?r.a.createElement("div",{className:"list_pages"},c&&c.length>0?c.map(function(e,t){var a=e.title,n=e.description,c=e._id;return r.a.createElement(oe.b,{to:"/users/".concat(b,"/pages/").concat(c)},r.a.createElement("div",{className:"page_item"},r.a.createElement("p",{className:"page_item_title"},a),r.a.createElement("p",null,n)))}):r.a.createElement("p",null,O)):r.a.createElement(Y,null)};Ee.defaultProps={className:"page"};var Oe=Ee,je=a(10);function ye(e){return function(t){function a(){var e;return Object(O.a)(this,a),(e=Object(y.a)(this,Object(w.a)(a).call(this))).state={loading:!0,redirect:!1,user:null},e}return Object(N.a)(a,t),Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/checkToken").then(function(t){if(200!==t.status){var a=new Error(t.error);throw e.setState({loading:!1,redirect:!0}),a}t.json().then(function(t){e.setState({user:t.username}),e.setState({loading:!1})})}).catch(function(t){console.error(t),e.setState({loading:!1,redirect:!0})})}},{key:"render",value:function(){var t=this.state,a=t.loading,n=t.redirect;return a?null:n?r.a.createElement(je.a,{to:"/register"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(e,Object.assign({user:this.state.user},this.props)))}}]),a}(n.Component)}var we=function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0],s=a[1];return Object(n.useEffect)(function(){fetch("/checkToken").then(function(e){if(200!==e.status)throw new Error(e.error);e.json().then(function(e){return s(e.username)})}).catch(function(e){console.error(e)})},[]),r.a.createElement(oe.a,null,r.a.createElement(X,{user:c}),r.a.createElement(u,null,r.a.createElement(je.d,null,r.a.createElement(je.b,{path:"/users/:username/pages/:pageid",component:function(){return r.a.createElement(ve,{user:c})}}),r.a.createElement(je.b,{path:"/users/:username/editpage/:pageid",component:ye(G)}),r.a.createElement(je.b,{path:"/",exact:!0,component:ye(me)}),r.a.createElement(je.b,{path:"/login",component:ee}),r.a.createElement(je.b,{path:"/logout",component:ae}),r.a.createElement(je.b,{path:"/register",component:ne}),r.a.createElement(je.b,{path:"/users/:username",component:Oe}),r.a.createElement(je.b,{path:"*",component:Q}))))};s.a.render(r.a.createElement(we,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.eb182a48.chunk.js.map