(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,a){e.exports=a(68)},45:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),l=a.n(o),s=a(13),c=a(20),i=a(6),u=a(18),m=a(19),f=a.n(m),d=a(34),p=a(7),h=a(8),b=a(11),v=a(9),E=a(10),g=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).submitEntry=function(e){e.preventDefault();var t=new Date,n=t.getDate(),r=t.getMonth()+1,o=t.getFullYear();n<10&&(n="0"+n),r<10&&(r="0"+r),t=r+"/"+n+"/"+o;var l=a.refs.NewPost.value;if(""!==l){var s={message:l,date:t};fetch("/api/add",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(s)}).then(function(e){return console.log(e)}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)});var c=l;return a.props.updateEntries(c),a.refs.NewPost.value="",c}},a.cancelEntry=function(){a.refs.NewPost.value=""},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"create-entry"},r.a.createElement("textarea",{ref:"NewPost",placeholder:"Feel free to blabber here..."}),r.a.createElement("div",{className:"create-entry-buttons"},r.a.createElement("button",{className:"PrimaryButton",onClick:this.submitEntry},"Submit"),r.a.createElement("button",{className:"SecondaryButton",onClick:this.cancelEntry},"Cancel")))}}]),t}(n.Component),y=a(35),O=a.n(y);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var S=function(e){var t=e.svgRef,a=w(e,["svgRef"]);return r.a.createElement("svg",j({viewBox:"0 0 26 26",width:"26px",height:"26px",ref:t},a),r.a.createElement("g",{id:"surface1"},r.a.createElement("path",{style:{},d:"M 11 -0.03125 C 10.164063 -0.03125 9.34375 0.132813 8.75 0.71875 C 8.15625 1.304688 7.96875 2.136719 7.96875 3 L 4 3 C 3.449219 3 3 3.449219 3 4 L 2 4 L 2 6 L 24 6 L 24 4 L 23 4 C 23 3.449219 22.550781 3 22 3 L 18.03125 3 C 18.03125 2.136719 17.84375 1.304688 17.25 0.71875 C 16.65625 0.132813 15.835938 -0.03125 15 -0.03125 Z M 11 2.03125 L 15 2.03125 C 15.546875 2.03125 15.71875 2.160156 15.78125 2.21875 C 15.84375 2.277344 15.96875 2.441406 15.96875 3 L 10.03125 3 C 10.03125 2.441406 10.15625 2.277344 10.21875 2.21875 C 10.28125 2.160156 10.453125 2.03125 11 2.03125 Z M 4 7 L 4 23 C 4 24.652344 5.347656 26 7 26 L 19 26 C 20.652344 26 22 24.652344 22 23 L 22 7 Z M 8 10 L 10 10 L 10 22 L 8 22 Z M 12 10 L 14 10 L 14 22 L 12 22 Z M 16 10 L 18 10 L 18 22 L 16 22 Z "})))},C=r.a.forwardRef(function(e,t){return r.a.createElement(S,j({svgRef:t},e))}),L=(a.p,function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).updateEntries=function(e){var t=new Date,n=t.getDate(),r=t.getMonth()+1,o=t.getFullYear();n<10&&(n="0"+n),r<10&&(r="0"+r),t=r+"/"+n+"/"+o;var l=a.state.posts.slice();l.push({message:e,date:t}),a.setState({posts:l})},a.callBackendAPI=Object(d.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/posts");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)})),a.deleteEntry=function(e){if(window.confirm("Press OK to confirm.")){var t=a.state.posts.slice(),n=t.indexOf(e);-1!==n&&(t.splice(n,1),a.setState({posts:t})),fetch("/api/delete",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(e)}).then(function(e){return console.log(e)}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}},a.handleStart=function(e){e.preventDefault(),a.setState({trashVisible:!0})},a.handleStop=function(e,t){e.preventDefault(),a.setState({trashVisible:!1}),e.screenY>=500&&a.deleteEntry(t)},a.state={posts:[],loaded:!1,trashVisible:!1},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.callBackendAPI().then(function(t){return e.setState({posts:t})}).catch(function(e){return console.log(e)}),this.setState({loaded:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(g,{updateEntries:this.updateEntries}),this.state.trashVisible?r.a.createElement("div",{className:"trash-area"},r.a.createElement(C,{className:"trashicon"})):null,r.a.createElement("div",{className:"submissions"},this.state.loaded?this.state.posts.map(function(t,a){return t.message&&t.date?r.a.createElement(O.a,{defaultPosition:{x:0,y:0},position:{x:0,y:0},grid:[25,25],scale:1,onStart:function(t){return e.handleStart(t)},onStop:function(a){return e.handleStop(a,t)}},r.a.createElement("div",{className:"submissions_post"},r.a.createElement("p",null,t.message),r.a.createElement("p",{className:"submissions_post_date"},t.date))):null}):r.a.createElement("p",null,"loading...")))}}]),t}(n.Component)),N=(a(45),function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(s.a)(c,2),u=i[0],m=i[1],f=function(e){"username"===e.target.name?l(e.target.value):"password"===e.target.name&&m(e.target.value)};return r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),""!==o&&u.length>3){var a={username:o,password:u};fetch("/api/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(a)}).then(function(t){200===t.status&&e.setLogin(!0)}).then(function(e){return e}).catch(function(e){return e})}}},r.a.createElement("section",null,r.a.createElement("input",{type:"text",name:"username",value:o,onChange:f,placeholder:"username"}),r.a.createElement("input",{type:"password",name:"password",value:u,onChange:f,placeholder:"password"})),r.a.createElement("br",null),r.a.createElement("section",null,r.a.createElement("button",{type:"submit",className:"PrimaryButton"},"Login")))}),k=a(15),P=a(36),x=a.n(P),_=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).state={file:null},a.onFormSubmit=a.onFormSubmit.bind(Object(k.a)(a)),a.onChange=a.onChange.bind(Object(k.a)(a)),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"onChange",value:function(e){this.setState({file:e.target.files[0]})}},{key:"onFormSubmit",value:function(e){e.preventDefault();var t=new FormData;t.append("photo_file",this.state.file,this.state.filename),x()({method:"post",url:"/api/uploadphoto",data:t,headers:{"Content-Type":"multipart/form-data;"}}),this.props.setVisible(!1)}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement("input",{type:"file",name:"photo_file",onChange:this.onChange}),r.a.createElement("input",{class:"SecondaryButton",type:"submit",value:"upload"}),r.a.createElement("button",{class:"PrimaryButton",onClick:function(){return e.props.setVisible(!1)}},"cancel"))}}]),t}(r.a.Component),B=function(e){return e.visible?(document.body.style.overflow="hidden",r.a.createElement("div",{className:"upload-modal-background"},r.a.createElement("div",{className:"upload-modal"},r.a.createElement(_,{setVisible:e.setVisible})))):(document.body.style.overflow="revert",null)};var D=function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(!1),m=Object(s.a)(l,2),f=m[0],d=m[1];return r.a.createElement(c.a,null,f?null:r.a.createElement(u.a,null,r.a.createElement(u.b,{classToggle:"Header_Animation",triggerElement:"#dummy",offset:50},r.a.createElement("div",{className:"GlobalHeader"},r.a.createElement("div",{className:"GlobalHeader_Left GlobalHeader_List"},r.a.createElement("ul",{className:"GlobalHeader_Titles"},r.a.createElement("li",null,r.a.createElement(c.b,{to:"/",className:"GlobalHeader_Logo"},"blabber.")))),r.a.createElement("div",{className:"GlobalHeader_Right GlobalHeader_List"},r.a.createElement("ul",{className:"GlobalHeader_Titles"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("button",{className:"PrimaryButton",onClick:function(){return d(!0)}},"upload photo")),r.a.createElement("li",null,r.a.createElement("button",{className:"SecondaryButton",onClick:function(){return o(!1)}},"logout"))):null))))),r.a.createElement("div",{className:"main_container"},r.a.createElement(B,{visible:f,setVisible:d}),a?r.a.createElement(i.a,{path:"/",exact:!0,component:L}):r.a.createElement(i.a,{path:"/",render:function(e){return r.a.createElement(N,{setLogin:o})}})))};a(67);var T=function(){return r.a.createElement(D,null)};l.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.95a3927f.chunk.js.map